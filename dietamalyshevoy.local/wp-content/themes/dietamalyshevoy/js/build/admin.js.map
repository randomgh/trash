{"version":3,"sources":["admin.js"],"names":["document","window","location","$","event","preventDefault","currentTarget","metaBox","target","parents","frame","wp","data","library","type","split","value","find","input","on","attachment","state","get","toJSON","html","concat","url","val","id","toggleClass","open","actionAdd","actionEdit","actionRemove","remove","addUrl","actions","media","item","img","actionAddUrl","actionAddImage","first","attr","edit","children","before","jQuery"],"mappings":"cAAA,SAAEA,EAAUC,EAAQC,EAAUC,GAC1BA,EAAE,WADMF,SAAVD,EAAUC,GACNG,EAAMC,iBAEMA,IAAAA,EAAND,EAAAE,cAEYC,EAASD,EAAAA,GAAAA,QAArB,oBACIC,EAAYC,EAAQC,KAAAA,QAChBC,EAAUC,GAACC,MAAK,CACVC,QAAO,CACJC,KAAAA,EAAAA,EAAAC,MAAA,KAAA,QAJjBC,EAAAT,EAAAU,KAAA,qBAQSC,EAAGX,EAAaU,KAAA,qBAGnBE,EAAGA,GAAA,SAAU,WACTC,IAAUA,EAASC,EAAQC,QAAIA,IAAA,aAAqBC,QAA1DA,SAEQT,OAARA,GACS,IAAL,QACIE,EAAAQ,KAAA,6CAAAC,OAAwDL,EAAWM,IAAnE,eACA,MACJ,IAAK,QAALV,EAAAQ,KAAA,2CAAAC,OAAAL,EAAAM,IAAA,gBAKJR,EAAMS,IAAIP,EAAWQ,IAEbC,EAAAA,YAAY,mBAApB,GACQA,EAAAA,YAAY,mBAApB,KA7BRnB,EAAAoB,OAFP,IAwDgBvB,EAAWU,EAAAA,oBAChBC,EAAgBD,EAAKA,KAAA,0BAEzBc,EAAAxB,EAAAU,KAAA,2BACAe,EAAuBF,EAAvBb,KAAA,6BACAgB,EAAgB1B,EAAhBU,KAAyBiB,qBACzBhB,EAAAX,EAAAU,KAAA,qBA7DJc,EAAAZ,GAAA,QAAAW,GAiEEE,EAAMb,GAAA,QAAAW,GACEK,EAAShB,GAAA,QA7BLd,SAAAA,GAEAG,EAAMH,iBAERW,IAAQT,EAAQU,EAAKX,cAChBC,EAAWU,EAAAA,GAAKR,QAAA,oBAEzBO,EAAAT,EAAAU,KAAA,qBACUC,EAAVX,EAAAU,KAAA,qBAGAV,EAAQsB,KAAAA,IAZZX,EAAAS,IAAA,IAeMpB,EAAYsB,YAAA,mBAAlB,GACIE,EAAYxB,YAAA,mBAAa,KAezBH,EAAMC,GAAAA,QAANyB,GAEAZ,EAAMV,GAAM,UAASF,KAIrB8B,EAAAA,WAoCA,SAAMN,EAAN1B,GAhBJA,EAAAC,iBAmBM6B,IAAS1B,EAAT0B,EAAS9B,cACLC,EAAAA,GAANgC,MAAA,IAEQ/B,EAAAA,EAAAA,GAAeG,QAAQ,oBAHnCS,EAAAoB,EAAArB,KAAA,qBAZQsB,EAAMD,EAAKrB,KAAK,0BAmBpBuB,EAAAA,GAAY,SAAWvB,WACvBwB,IAAcrB,EAAWH,EAAKI,QAAAC,IAAA,aAAAoB,QAFlCnB,SAKWgB,EAAAI,KAAS,MAAAvB,EAApBM,KACWR,EAAXS,IAAoBP,EAAAQ,MA3DxBlB,EAAAoB,OACI,IAoDMvB,EAAUJ,EAAE,sBACdqC,EAAejC,EAAQU,KAAK,8BAC5BwB,EAAiBlC,EAAQU,KAAK,gCAElCV,EAAQY,GAAG,QAAS,0BAA2ByB,GAC/CrC,EAAQY,GAAG,QAAS,oBAAqByB,GACzCrC,EAAQY,GAAG,QAAS,4BAZL,SAAAf,GACXA,EAAMC,iBAENF,EAAEC,EAAME,eAAeG,QAAQ,oBAAoByB,WAWvDM,EAAarB,GAAG,QA5DhB,SAAAf,GACIA,EAAMC,iBAUAA,IAAAA,EAAND,EAAAE,cAEYC,EAASD,EAAAA,GAAAA,QAArB,sBACYC,EADZsC,SAAA,uBAGctC,OAAO,oFAHrBA,EAAAK,KAAA,SAAA,WAAAL,EAAAK,KAAA,QAAA,wJAgDJ6B,EAAetB,GAAG,QAxCF2B,SAAAA,GAHZ1C,EAAAC,iBARJ,IAAAG,EAAAJ,EAAAE,cAIQI,EAAQC,GAAG0B,MAAM,IAaZ9B,EAAPqC,EAAOpC,GAASC,QAAA,sBACZJ,EAANE,EAAAsC,SAAA,uBAGInC,EAAQC,GAAG0B,SADf,WAEQ,IAAK7B,EAAgBE,EAAAW,QAAAC,IAAlB,aAFXoB,QAAAnB,SAIUe,EAAKrB,OAAK,wHAJpBV,EAAAK,KAAA,SAAA,WAAAL,EAAAK,KAAA,QAAA,0BAAAQ,EAAAQ,GAAA,4EAAAR,EAAAM,IAAA,UAAAN,EAAAQ,GAAA,yOASQe,EAAKb,WA1GzB,CAkIG9B,SAAUC,OAAQC,SAAU6C","file":"admin.js","sourcesContent":["((document, window, location, $) => {\r\n    $(() => {\r\n        const open = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                metaBox = $(target).parents('.dem-field_media'),\r\n                type = metaBox.data('type'),\r\n                frame = wp.media({\r\n                    library: {\r\n                        type: type ? type.split(',') : null\r\n                    }\r\n                }),\r\n                value = metaBox.find('.dem-field__value'),\r\n                input = metaBox.find('.dem-field__input');\r\n\r\n            frame.on('select', function(){\r\n                const attachment = frame.state().get('selection').first().toJSON();\r\n\r\n                switch (type) {\r\n                    case 'video':\r\n                        value.html(`<video class=\"dem-field__value__img\" src=\"${attachment.url}\"></video>`);\r\n                        break;\r\n                    case 'image':\r\n                        value.html(`<img class=\"dem-field__value__img\" src=\"${attachment.url}\" alt=\"\" />`);\r\n                        break;\r\n                }\r\n\r\n                input.val(attachment.id);\r\n\r\n                metaBox.toggleClass('dem-field_value', true);\r\n                metaBox.toggleClass('dem-field_empty', false);\r\n            });\r\n\r\n            frame.open();\r\n        };\r\n\r\n        const remove = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                metaBox = $(target).parents('.dem-field_media'),\r\n                value = metaBox.find('.dem-field__value'),\r\n                input = metaBox.find('.dem-field__input');\r\n\r\n            value.html('');\r\n            input.val('');\r\n\r\n            metaBox.toggleClass('dem-field_value', false);\r\n            metaBox.toggleClass('dem-field_empty', true);\r\n        };\r\n\r\n        const metaBox = $('.dem-field_media'),\r\n            actionAdd = metaBox.find('.dem-field__action_add'),\r\n            actionEdit = metaBox.find('.dem-field__action_edit'),\r\n            actionRemove = metaBox.find('.dem-field__action_remove'),\r\n            value = metaBox.find('.dem-field__value'),\r\n            input = metaBox.find('.dem-field__input');\r\n\r\n        actionAdd.on('click', open);\r\n        actionEdit.on('click', open);\r\n        actionRemove.on('click', remove);\r\n        value.on('click', open);\r\n        input.on('focusin', open);\r\n    });\r\n\r\n    $(() => {\r\n        const addUrl = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                metaBox = $(target).parents('.dem-field_gallery'),\r\n                actions = metaBox.children('.dem-field__actions');\r\n\r\n            actions.before('<div class=\"dem-field__item\"><input class=\"dem-field__input dem-field__input_url ' + metaBox.data('class') + '\" name=\"' + metaBox.data('name') + '\" type=\"url\"><span class=\"dem-field__actions\"><a class=\"dem-field__action dem-field__action_remove\" href=\"#\" title=\"Remove icon\"></a></span></div>');\r\n        };\r\n\r\n        const open = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                frame = wp.media({}),\r\n                metaBox = $(target).parents('.dem-field_gallery'),\r\n                actions = metaBox.children('.dem-field__actions');\r\n\r\n            frame.on('select', function(){\r\n                const attachment = frame.state().get('selection').first().toJSON();\r\n\r\n                actions.before('<div class=\"dem-field__item\"><input class=\"components-hidden-control__input dem-field__input dem-field__input_hidden ' + metaBox.data('class') + '\" name=\"' + metaBox.data('name') + '\" type=\"hidden\" value=\"' + attachment.id + '\"><span class=\"dem-field__value\"><img class=\"dem-field__value__img\" src=\"' + attachment.url + '\" alt=\"' + attachment.id + '\" /></span><span class=\"dem-field__actions\"><a class=\"dem-field__action dem-field__action_edit\" href=\"#\" title=\"Edit icon\"></a><a class=\"dem-field__action dem-field__action_remove\" href=\"#\" title=\"Remove icon\"></a></span></div>');\r\n            });\r\n\r\n            frame.open();\r\n        };\r\n\r\n        const edit = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                frame = wp.media({}),\r\n                item = $(target).parents('.dem-field__item'),\r\n                input = item.find('.dem-field__input'),\r\n                img = item.find('.dem-field__value__img');\r\n\r\n            frame.on('select', function(){\r\n                const attachment = frame.state().get('selection').first().toJSON();\r\n\r\n                img.attr('src', attachment.url);\r\n                input.val(attachment.id);\r\n            });\r\n\r\n            frame.open();\r\n        };\r\n\r\n        const remove = event => {\r\n            event.preventDefault();\r\n\r\n            $(event.currentTarget).parents('.dem-field__item').remove()\r\n        };\r\n\r\n        const metaBox = $('.dem-field_gallery'),\r\n            actionAddUrl = metaBox.find('.dem-field__action_add-url'),\r\n            actionAddImage = metaBox.find('.dem-field__action_add-image');\r\n\r\n        metaBox.on('click', '.dem-field__action_edit', edit);\r\n        metaBox.on('click', '.dem-field__value', edit);\r\n        metaBox.on('click', '.dem-field__action_remove', remove);\r\n\r\n        actionAddUrl.on('click', addUrl);\r\n        actionAddImage.on('click', open);\r\n    });\r\n})(document, window, location, jQuery);"]}