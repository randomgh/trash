{"version":3,"sources":["script.js"],"names":["document","window","location","$","adaptation","$body","$app","$main","$header","$overlay","$newsExcerpts","$newsAside","$newsAsideSVG","$newsAsideIMG","$news","$newsImage","$newsSVG","$newsIMG","$newsText","$newsLink","$newsDate","$charts","url","player","$document","$youtubePlay","$video","WP","arguments","length","undefined","BREAKPOINTS","ADAPTATIONS","size","height","onWindowScroll","event","$this","$current","$sections","first","toggleClass","index","onWindowResize","this","ceil","scrollTop","$window","$target","width","children","toolbar","directories","onShare","preventDefault","currentTarget","id","resize","appWidth","outerWidth","appHeight","innerHeight","newAdaptation","top","left","removeClass","css","minHeight","addClass","concat","$sectionAsides","end","find","$sectionNews","Math","min","$footer","offset","html","attr","indexOf","hasClass","showNews","i","initCharts","eq","data","imageWidth","on","onChartsScroll","text","date","imageSRC","imageHeight","title","visible","$pagination","each","page","parseInt","pages","$youtube","ajax","method","initYoutube","dataType","action","lang","beforeSend","xhr","settings","error","status","origin","success","onPlayerReady","before","onPlayerState","YT","PlayerState","ENDED","fullscreen","exit","initVideo","isFullScreen","interval","setInterval","stopVideo","onVideoReady","target","removeEventListener","type","setTimeout","READY_TIMEOUT","onYouTubePlayerAPIReady","addEventListener","$newsList","onNewsExcerpt","onPaginationScroll","youtube","Player","playerVars","showinfo","enablejsapi","onYoutubePlay","events","onYoutubeFullscreen","onStateChange","bind","clearInterval","jQuery"],"mappings":"cAAA,SAAEA,EAAUC,EAAQC,EAAUC,EAA9B,GAA6C,IAwB/BC,EAYNC,EACAC,EAUAD,EACIE,EACJC,EAEAD,EACAE,EA6HAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EAhBAC,EAkBIT,EAkCJU,EA+CgBC,EAuBhBC,EA4BIC,EACHC,EA8BDC,EAhWyBC,EAAY,EAAAC,UAAAC,aAAAC,IAA7C,EAAA,EAAsC,GAC5BC,EADmC,IACnCA,EAAc,IAAdA,EAAc,KAAdA,EAAc,KAYLC,EAZK,CAAA,WAAA,WAAA,WAAA,YAAA,aAApBC,EAAA,CA0BI7B,MAAJ,EACQ8B,OAAG,GADXV,EAAArB,EAAAH,GAMMwB,EAAcxB,EAAAA,GA6CXmC,EAAA,SAAAC,GAPL,IAUMC,EAVNC,EAAAC,EAAAC,QAaID,EAACE,KAAY,SAAAC,GAGfC,GApBNN,EAAAlC,EAAAyC,MAoBMD,KAAcE,KAAGR,EAAjBM,SAAAA,IAAiBP,EAASU,aAAAC,EAAAb,SAAA,EACtB,OAAA,EADVI,EAAAD,IASUW,IAEAC,EAAKR,YAAYO,0BAFvB,IAEuBV,EAFvBY,SAAA,eAAArB,QAGMK,EAAAA,YAAiB,iCAHvB,IAAAI,EAAAY,SAAA,UAAArB,SAMMsB,EANN,SAAAf,GAOMlC,IAEAkD,KAKNC,EAAA,SAAAjB,GAGJA,EAAAkB,iBAjBI,IAAMN,EAAU7C,EAAEiC,EAAMmB,eAkBhBC,EAAGR,EAATS,KAAS,aACLC,EAAWX,SAAWY,EAAAA,KAA5B,iBACMC,EAAYb,SAAWc,EAAAA,KAD7B,kBAGIC,GAAJf,EAAAE,QAAAA,GAAA,EAjBMc,GAAOhB,EAAQb,SAAWA,GAAU,EAS1C,OAcQ4B,EAAAA,KAAAA,EAAgB9B,KAAAA,QAAhBwB,EAAAM,SAAAA,OAAAb,EAAAa,aAAAA,OAAA5B,EAAA4B,WAAAA,OAAAE,EAAAF,UAAAA,OAAAC,EAAAD,cAAAA,OALR,EAKQA,eAAAA,OAJa/B,EAIb+B,cAAAA,OAHgB9B,EAGhB8B,kBAAAA,OAFA,EAEAA,iBAAAA,OAlBW,KAIZ,GAILL,EAAS,WAeP,IAXAK,EAWKJ,EAAW3B,EAAW,GAAtB4B,WACDG,EAAgB9B,EAAAA,GAAW6B,YAE/B,QAAKH,GACDI,KAAAA,GAAgB9B,EAChB8B,EAAA9B,EAAA,GAfR,MAII,KAAgBD,EAAX2B,GAAgCA,GAAY3B,EAcjD3B,EAAe0D,EAAe,GACzBG,MAEL7D,KAAa0D,EAAHJ,GAAVA,GAAA3B,EACH+B,EAAA9B,EAAA,GAbO,MAeA,KAAW0B,EAAVT,GAA2Bf,GAAW0B,EAClCM,EAAIlC,EAAA,GAAQ,MAArB,KAAAD,EAAA2B,EACUI,EAAA9B,EAAA,GACMmC,IAASL,IAAsBtB,EAAQ0B,YAAR1B,kBAAAA,OAAYpC,IAAAgE,SAAZ5B,kBAAAA,OAAYsB,IAA3D1D,EAAA0D,GACA7B,EAAAgB,QAAAS,GAAAzB,EAAAC,SAAA0B,IAEInD,EAAGyD,IAAA,CAAAhC,OAAA,GAAAmC,OAAAT,EAAA,QACHX,EAAOS,IAAAA,CADJS,UAAA,GAAAE,OAAAT,EAAA,QAEH1B,EAAQ0B,IAAAA,CAAAA,UAAAA,GAAAA,OAAAA,EAAAA,QAAAA,QAAAA,IAAAA,CAAAA,UAAAA,IAAAA,OAAAA,EAAAA,QAFZU,EAAAC,MAAAC,KAAA,eAAAN,IAAA,CAAAhC,OAAA,GAAAmC,OAAAT,EAAA,QAAA3B,EAAO,CAMCgB,MAAKS,EACJQ,OAAIN,IAMjBhD,UAFA6D,EACA9D,IAAAA,aALIF,EAASyD,IAAI,aAAcQ,KAAKC,IAAI,EAAGD,KAAK7B,KAAK+B,EAAQC,SAASd,IAAMhB,EAAQD,YAAcC,EAAQb,WAAa,OA2DvHrB,EAAmB,SAAAuB,GACnBlB,EAAU4D,iBAEV,IAAS,CAACC,EAAV,GAAA/C,EAAA,IAAAgD,QAAA5E,IAEIU,EAAMmE,EAAS7C,EAAAmB,eAAqBb,UAhBtCwC,EAAW,SAAAC,GAqBXC,IAAAA,EAAa1E,EAAA2E,GAAMF,GACXhF,EAAV6C,EAAAsC,KAAA,aAnBMC,EAAavC,EAAQsC,KAAK,eAqB5BjE,EAAgB2B,EAAAsC,KAAA,gBACRE,EAAGxC,EAAUyC,KAAAA,SAErBA,EAAczC,EAAA+B,KAAA,QACjBW,EAAA1C,EAAAwB,KAAA,uBAAAM,OAPLa,EAAA3C,EAAAwB,KAAA,uBAAAkB,OAUMD,EAAchD,YAAdgD,qBAA0BG,GAAAb,KAAA,UAAAQ,GAAAM,EAAA,OAAAxB,OAAAkB,EAAA,KAAAlB,OAAAwB,GAAA,IAAAP,KAAA,QAAAQ,GAAAR,KAAA,QAAAC,GAAAD,KAAA,SAAAO,GACxBxD,EAAJ0C,KAAA,aAAAa,GAAA,IAEAvE,EAAcmD,KAAKkB,GACfrD,EAAUqD,KAAVC,GAEAxE,EAAU4E,KAAN,OAAiB1D,GAN7BvB,EAAAmE,SAAA,gBAAAnE,EAAAmD,YAAA,gBAyBI+B,EAAuB,SAAA5D,GACnBC,IAAKA,EAELhB,EAAU0E,MAAAA,KAAW,iBAAAE,KAAA,YACbC,EAAOC,EAAAA,OAvBLJ,WAAW1D,EAAM4B,YAAY,mBAyCvB5B,EAAe,SAAAD,GAClB,IAAAC,EAEGA,EAAMiD,MAAKd,KAAX,sBAAuCyB,KAAGC,WAGrD,IAFQ7D,EAAAlC,EAAAyC,OAERmD,UAAA,CACJ,IAAAG,EAAAC,SAAA9D,EAAAiD,KAAA,SA7BLc,EAAAD,SAAA9D,EAAAiD,KAAA,UAOoBY,EAARE,GA2BZC,EADJC,KAEI7E,CA1BgB8E,OAAQ,OA4BRjF,IAAdkF,EAAAA,IACWC,SAAb,OACiBnB,KAAA,CA1BGoB,OAAQ,aA4BLjF,KAAAA,EAAaI,KAApC,QACa8E,KAAcN,EAAaf,KAAA,QACdA,OADcY,GAGpBU,WAAA,SAAAC,EAAAC,GAAAzE,EAAA4B,YAAA,sBAAA8C,MAAA,SAAAF,EAAAG,EAAAD,GAISE,EAAAA,SAAAA,sBAEbC,QAAA,SAAA5B,EAAA0B,EAAAH,GACOM,EADP7B,KAAA,OAAAY,GAAA9B,SAAA8B,EAAAE,EAAA,oBAAA,wBAAAgB,OAAA9B,UA4CV6B,EAAN,SAAA/E,IA7BAiE,EAAWlG,EAAE,aA+BF0B,SAAQ,kBAHvBwF,EAAA,SAAAjF,GAvBQA,EAAMkD,OAASgC,GAAGC,YAAYC,OAAOrH,EAAEsH,WAAWC,QAkCjDtD,EAAS,SAAAhC,GACdV,EAAO0C,iBA7BPiC,EAASoB,cAkCTE,EAAS,SAAAvF,GACDjC,EAAAsH,WAAAG,gBACRxC,EAAUhB,SAAA,mBAGNyD,EAAWC,cAEPtB,EAAWvC,YAAA,mBAEd1C,EAAAwG,cAlBHC,EAAe,SAAfA,EAAe5F,GACjBA,EAAM6F,OAAOC,oBAAoB9F,EAAM+F,KAAMH,GAE7C1H,EAAK8D,SAAS,aACd1C,EAAO0C,SAAS,gBAGpBjE,EAAE,WA1TEmE,EAAAA,EAAiB/B,KAAUiC,QAE3BnE,EAAWA,EAAAmE,KAAA,QAEAlE,EAAXkE,KAAqBrC,WACrBY,EAAWzC,EAAXkE,KAAqB7B,WAErBA,EAAAA,EAAc6B,KAAA,SAEd4D,EAAW7H,EAAAiE,KAAA,YAAYJ,EAASI,KAArB,UAA+B6D,EAAhC9H,EAAViE,KAAA,YAlBJF,EAAA/B,EAAAiC,KAAA,UAqBMrC,EAAAA,KAAAA,iBAAAA,MAAAA,GAEEE,EADJmD,GAAA,SAAArD,GAGAI,EAAU0D,GAAK,SAASvD,GATxBC,IAaQyF,WAAO,WAAA,OAAP/H,EAAA+D,SAAA,UA7DM,MAqXtB1C,EAAS4G,EAAAA,WAERzG,QA/BWH,EAAOwB,SAAS,iBAAiB,GAAGqF,iBAAiB,OAAQP,GArKhEvD,EAAAlE,EAAAiE,KAAA,iBAnBLgE,EAAA/D,EAAAD,KAAA,uBAGI9D,EAAgB8H,EAAUhE,KAAK,iBAmB7BiE,EAAahE,EAAbgE,KAAAA,eACFrG,EAAAzB,EAAA6D,KAAA,eAjBA3D,EAAgBD,EAAc4D,KAAK,oBAmB/B1D,EAAEkB,EAAgBA,KAAAA,SAClBkD,EAAW9C,EAAMmB,KAAAA,gBACpBvC,EAAAD,EAAAyD,KAAA,eALLxD,EAAAwD,KAAA,oBAXItD,EAAYJ,EAAM0D,KAAK,wBAmBrBU,EAAWpE,EAAXoE,KAAAA,wBACIlC,EAAUtC,EAAAA,KAAa,wBAEvB6E,EAAavC,SACb6C,EAAc7C,GAAAA,YAAa,gBAHjCyF,GAKSvD,EAAU,KAgBnB7D,EAAUlB,EAAE,WAyBG0B,SAEX6G,EAAAA,GAAAA,SAAkBjD,GAN1BA,MA0BwBiB,EAAQvG,EAAA,gBAEAkC,SACR6D,EAAQV,GAAEU,SAAAA,GAEdU,KAkGhB,IAAIiB,EAAWC,YAAY,WACnBa,UApDNxB,EAAahH,EAAA,YACfkG,EAAalG,EAAA,iBADjBkG,EAAAxE,QAAAJ,EAAAI,SAvBQN,EAAS,IAAI+F,GAAGsB,OAAOvC,EAAS,GAAI,CA4BtCgB,QAAgBhB,EAAhBgB,KAAAA,MACQ/B,KAAN,0BADRuD,WAAA,CAxBgBC,SAAU,EA4BPC,YAAbC,EACI1F,GAAN,EAESmE,OAATvH,EAAA+G,QA1BQgC,OAAQ,CA6BdC,QAAsB/B,EACpBgC,cAA6B9B,KAKpBpD,EAAYpC,QAEdkG,EAAPvC,GAAA,QAAAwD,GA3BAxH,EAAU4H,KAAK,gBAAiBF,IA0D5BG,cAAcxB,KAEnB,OA7XX,CA+XG7H,SAAUC,OAAQC,SAAUoJ,OAAQ3H,IAEvC,IAAIgH,SAAU,EAEd,SAASL,0BACLK,SAAU","file":"script.js","sourcesContent":["((document, window, location, $, WP = {}) => {\r\n    const BREAKPOINTS = {\r\n              xxxxxs: 320,\r\n              xxxxs:  375,\r\n              xxxs:   425,\r\n              xxs:    480,\r\n              xs:     640,\r\n              s:      768,\r\n              m:      960,\r\n              l:      1024,\r\n              xl:     1280,\r\n              xxl:    1440,\r\n              xxxl:   1600,\r\n              xxxxl:  1920,\r\n              xxxxxl: 2560\r\n          },\r\n          ADAPTATIONS = ['mobile-s', 'mobile-l', 'tablet-l', 'desktop-s', 'desktop-l'],\r\n          READY_TIMEOUT = 500,\r\n          QUALITIES = {\r\n              'small': 240,\r\n              'medium': 360,\r\n              'large': 480,\r\n              'hd720': 720,\r\n              'hd1080': 1080,\r\n              'highres': 0\r\n          };\r\n\r\n    let adaptation,\r\n        size = {\r\n            width: 0,\r\n            height: 0\r\n        };\r\n\r\n    const $document = $(document),\r\n          $window = $(window);\r\n\r\n    let $body,\r\n        $app,\r\n        $header,\r\n        $footer,\r\n        $main,\r\n        $overlay,\r\n        $overlayAsides,\r\n        $sections,\r\n        $sectionAsides;\r\n\r\n    const init = () => {\r\n        $body = $document.find('body');\r\n        $app = $body.find('.app');\r\n        $header = $app.find('.header');\r\n        $footer = $app.find('.footer');\r\n        $main = $app.find('.main');\r\n        $overlay = $main.find('.overlay');\r\n        $overlayAsides = $overlay.find('.aside');\r\n        $sections = $main.find('.section');\r\n        $sectionAsides = $sections.find('.aside');\r\n\r\n        $body.find('.social__link').click(onShare);\r\n\r\n        $window.on('scroll', onWindowScroll);\r\n        $window.on('resize', onWindowResize);\r\n\r\n        onWindowResize();\r\n\r\n        setTimeout(() => $body.addClass('ready'), READY_TIMEOUT);\r\n    };\r\n\r\n    const onWindowScroll = event => {\r\n        let $current = $sections.first(),\r\n            $this;\r\n\r\n        $sections.each(function(index) {\r\n            $this = $(this);\r\n\r\n            if (Math.ceil($this.offset().top - $window.scrollTop()) > $window.height() / 2) {\r\n                return false;\r\n            } else {\r\n                $current = $this;\r\n            }\r\n        });\r\n\r\n        resize();\r\n\r\n        $app.toggleClass('app_overlay_transparent', $current.children('.background').length !== 0);\r\n        $app.toggleClass('app_overlay_border-transparent', $current.children('.video').length !== 0);\r\n    };\r\n\r\n    const onWindowResize = event => {\r\n        resize();\r\n\r\n        onWindowScroll();\r\n    };\r\n\r\n    const onShare = event => {\r\n        event.preventDefault();\r\n\r\n        const $target = $(event.currentTarget),\r\n              id = $target.data('window_id'),\r\n              width = parseInt($target.data('window_width')),\r\n              height = parseInt($target.data('window_height')),\r\n              left = ($window.width() - width) / 2,\r\n              top = ($window.height() - height) / 2,\r\n              toolbar = 0,\r\n              location = 0,\r\n              menubar = 0,\r\n              directories = 0,\r\n              scrollbars = 0;\r\n\r\n        window.open($target.attr('href'), id, `width=${width}, height=${height}, left=${left}, top=${top}, toolbar=${toolbar}, location=${location}, menubar=${menubar}, directories=${directories}, scrollbars=${scrollbars}`);\r\n\r\n        return false;\r\n    };\r\n\r\n    // TODO: Add app min height\r\n    const resize = () => {\r\n        const appWidth = $window[0].outerWidth,\r\n              appHeight = $window[0].innerHeight;\r\n\r\n        let newAdaptation;\r\n        switch (true) {\r\n            case appWidth <= BREAKPOINTS.xxxxs:\r\n                newAdaptation = ADAPTATIONS[0];\r\n                break;\r\n            case appWidth > BREAKPOINTS.xxxxs && appWidth <= BREAKPOINTS.xs:\r\n                newAdaptation = ADAPTATIONS[1];\r\n                break;\r\n            case appWidth > BREAKPOINTS.xs && appWidth <= BREAKPOINTS.l:\r\n                newAdaptation = ADAPTATIONS[2];\r\n                break;\r\n            case appWidth > BREAKPOINTS.l && appWidth <= BREAKPOINTS.xxl:\r\n                newAdaptation = ADAPTATIONS[3];\r\n                break;\r\n            case appWidth > BREAKPOINTS.xxl:\r\n                newAdaptation = ADAPTATIONS[4];\r\n                break;\r\n        }\r\n\r\n        if (adaptation !== newAdaptation) {\r\n            $app.removeClass(`app_adaptation_${adaptation}`).addClass(`app_adaptation_${newAdaptation}`);\r\n\r\n            adaptation = newAdaptation;\r\n        }\r\n\r\n        if (size.width !== appWidth || size.height !== appHeight) {\r\n            $overlay.css({ height: `${appHeight}px` });\r\n            $main.css({ minHeight: `${appHeight}px` });\r\n            $sections.css({ minHeight: `${appHeight}px` }).first().css({ marginTop: `-${appHeight}px` });\r\n            $sectionAsides.end().find('.aside_full').css({ height: `${appHeight}px` });\r\n\r\n            size = {\r\n                width: appWidth,\r\n                height: appHeight\r\n            };\r\n        }\r\n        \r\n        if ($overlay.css('position') === 'fixed') {\r\n            $overlay.css('margin-top', Math.min(0, Math.ceil($footer.offset().top - $window.scrollTop() - $window.height())) + 'px')\r\n        }\r\n    };\r\n\r\n    let $sectionNews,\r\n        $newsAside,\r\n        $newsAsideSVG,\r\n        $newsAsideIMG,\r\n        $newsList,\r\n        $newsExcerpts,\r\n        $news,\r\n        $newsImage,\r\n        $newsSVG,\r\n        $newsIMG,\r\n        $newsText,\r\n        $newsDate,\r\n        $newsLink;\r\n\r\n    const initNews = () => {\r\n        $sectionNews = $main.find('.section_news');\r\n        $newsList = $sectionNews.find('.content .news-list');\r\n        $newsExcerpts = $newsList.find('.news-excerpt');\r\n        $newsAside = $sectionNews.find('.aside_news');\r\n        $newsAsideSVG = $newsAside.find('.background');\r\n        $newsAsideIMG = $newsAsideSVG.find('.background__img');\r\n        $news = $newsAside.find('.news');\r\n        $newsImage = $news.find('.news__image');\r\n        $newsSVG = $newsImage.find('.background');\r\n        $newsIMG = $newsSVG.find('.background__img');\r\n        $newsText = $news.find('.news__caption__text');\r\n        $newsDate = $news.find('.news__caption__date');\r\n        $newsLink = $news.find('.news__caption__link');\r\n\r\n        if ($newsAside.length) {\r\n            $newsList.on('mouseover', '.news-excerpt', onNewsExcerpt);\r\n\r\n            showNews(0);\r\n        }\r\n    };\r\n\r\n    const onNewsExcerpt = event => {\r\n        event.preventDefault();\r\n\r\n        if (![ADAPTATIONS[0], ADAPTATIONS[1]].indexOf(adaptation) >= 0) {\r\n            showNews($(event.currentTarget).index());\r\n        }\r\n    };\r\n\r\n    const showNews = i => {\r\n        const $target = $newsExcerpts.eq(i),\r\n              imageSRC = $target.data('image_src'),\r\n              imageWidth = $target.data('image_width'),\r\n              imageHeight = $target.data('image_height'),\r\n              title = $target.attr('title'),\r\n              url = $target.attr('href'),\r\n              text = $target.find('.news-excerpt__text').html(),\r\n              date = $target.find('.news-excerpt__date').text();\r\n\r\n        $newsAsideSVG.toggleClass('background_hidden', !imageSRC).attr('viewBox', imageWidth && imageHeight ? `0 0 ${imageWidth} ${imageHeight}` : '').data('title', title).data('width', imageWidth).data('height', imageHeight);\r\n        $newsAsideIMG.attr('xlink:href', imageSRC ? imageSRC : '');\r\n        $newsText.html(text);\r\n        $newsDate.text(date);\r\n        $newsLink.attr('href', url);\r\n\r\n        if ($news.hasClass('news_hidden')) $news.removeClass('news_hidden');\r\n    };\r\n\r\n    let $charts;\r\n\r\n    const initCharts = () => {\r\n        $charts = $('.chart');\r\n\r\n        if ($charts.length) {\r\n            $window.on('scroll', onChartsScroll);\r\n\r\n            onChartsScroll();\r\n        }\r\n    };\r\n\r\n    const onChartsScroll = event => {\r\n        let $this;\r\n\r\n        $charts.end().find('.chart_hidden').each(function() {\r\n            $this = $(this);\r\n\r\n            if ($this.visible()) $this.removeClass('chart_hidden');\r\n        });\r\n    };\r\n\r\n    let $pagination;\r\n\r\n    const initPagination = () => {\r\n        $pagination = $('.pagination');\r\n\r\n        if ($pagination.length) {\r\n            $window.on('scroll', onPaginationScroll);\r\n\r\n            onPaginationScroll();\r\n        }\r\n    };\r\n\r\n    const onPaginationScroll = event => {\r\n        let $this;\r\n\r\n        $pagination.end().find('.pagination_hidden').each(function() {\r\n            $this = $(this);\r\n\r\n            if ($this.visible()) {\r\n                let page = parseInt($this.data('page')),\r\n                    pages = parseInt($this.data('pages'));\r\n\r\n                if (pages > page) {\r\n                    $.ajax({\r\n                        method: 'post',\r\n                        url: WP.url,\r\n                        dataType: 'html',\r\n                        data: {\r\n                            action: 'pagination',\r\n                            type:   $this.data('type'),\r\n                            lang:   $this.data('lang'),\r\n                            page:   ++page\r\n                        },\r\n                        beforeSend: (xhr, settings) => {\r\n                            $this.removeClass('pagination_hidden');\r\n                        },\r\n                        error: (xhr, status, error) => {\r\n                            $this.addClass('pagination_hidden');\r\n                        },\r\n                        success: (data, status, xhr) => {\r\n                            $this.data('page', page).addClass(pages > page ? 'pagination_hidden' : 'pagination_completed').before(data);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    let player,\r\n        $youtube,\r\n        $youtubePlay;\r\n\r\n    const initYoutube = () => {\r\n        $youtube = $('.youtube');\r\n        $youtubePlay = $('.youtube-play');\r\n\r\n        if ($youtube.length && $youtubePlay.length) {\r\n            player = new YT.Player($youtube[0], {\r\n                videoId: $youtube.data('id'),\r\n                host: 'https://www.youtube.com',\r\n                playerVars: {\r\n                    showinfo: 0,\r\n                    enablejsapi: 1,\r\n                    fs: 0,\r\n                    origin: location.origin\r\n                },\r\n                events: {\r\n                    'onReady': onPlayerReady,\r\n                    'onStateChange': onPlayerState\r\n                }\r\n            });\r\n\r\n            if ($youtubePlay.length) {\r\n                $youtubePlay.on('click', onYoutubePlay);\r\n            }\r\n\r\n            $document.bind('fscreenchange', onYoutubeFullscreen);\r\n        }\r\n    };\r\n\r\n    const onPlayerReady = event => {\r\n        $youtube = $('.youtube');\r\n        $youtube.addClass('youtube_ready');\r\n    };\r\n\r\n    const onPlayerState = event => {\r\n        if (event.data === YT.PlayerState.ENDED) $.fullscreen.exit();\r\n    };\r\n\r\n    const onYoutubePlay = event => {\r\n        event.preventDefault();\r\n\r\n        $youtube.fullscreen();\r\n    };\r\n\r\n    const onYoutubeFullscreen = event => {\r\n        if ($.fullscreen.isFullScreen()) {\r\n            $youtube.addClass('youtube_playing');\r\n\r\n            player.playVideo();\r\n        } else {\r\n            $youtube.removeClass('youtube_playing');\r\n\r\n            player.stopVideo();\r\n        }\r\n    };\r\n\r\n    let $video;\r\n\r\n    const initVideo = () => {\r\n        $video = $('.video');\r\n\r\n        if ($video.length) {\r\n            $video.children('.video__video')[0].addEventListener(\"play\", onVideoReady);\r\n        }\r\n    };\r\n\r\n    const onVideoReady = event => {\r\n        event.target.removeEventListener(event.type, onVideoReady);\r\n\r\n        $app.addClass('app_video');\r\n        $video.addClass('video_ready');\r\n    };\r\n\r\n    $(() => {\r\n        init();\r\n        initVideo();\r\n        initNews();\r\n        initCharts();\r\n        initPagination();\r\n\r\n        let interval = setInterval(() => {\r\n            if (youtube) {\r\n                initYoutube();\r\n                clearInterval(interval);\r\n            }\r\n        }, 500);\r\n    });\r\n})(document, window, location, jQuery, WP);\r\n\r\nlet youtube = false;\r\n\r\nfunction onYouTubePlayerAPIReady() {\r\n    youtube = true;\r\n}"]}