"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}!function(r,a){var e=r.blocks.registerBlockType,t=r.i18n,c=t.__,n=(t.setLocaleData,r.editor),i=n.BlockControls,m=(n.InspectorControls,n.MediaUpload),o=r.components,l=o.Toolbar,u=(o.BaseControl,o.Modal),s=o.IconButton,d=o.Button,b=o.TextControl;r.element.Fragment;e("zabit/media",{title:c("Media","zabit"),icon:"images-alt",category:"layout",supports:{htmlValidation:!1},attributes:{content:{type:"array",default:[]},youtube:{type:"string",default:""},vimeo:{type:"string",default:""},iframe:{type:"string",default:""},openedYT:{type:"boolean",default:!1},openedVimeo:{type:"boolean",default:!1},openedIFrame:{type:"boolean",default:!1}},edit:function(t){function e(){t.setAttributes({openedYT:!1})}function a(){t.setAttributes({openedVimeo:!1})}function n(){t.setAttributes({openedIFrame:!1})}var o="zabit/media:".concat(Math.round(1024*Math.random()*1024));return r.element.createElement("div",{className:"".concat(t.className," media")},r.element.createElement(i,null,r.element.createElement(l,null,r.element.createElement(m,{onSelect:function(e){t.setAttributes({content:[].concat(_toConsumableArray(t.attributes.content),_toConsumableArray(e.map(function(e){return{type:"image",data:e}})))})},allowedTypes:["image/jpeg","image/jpg","image/png"],multiple:!0,render:function(e){var t=e.open;return r.element.createElement(s,{icon:"plus",label:c("Upload","zabit"),onClick:t})}}),r.element.createElement(m,{onSelect:function(e){t.setAttributes({content:[].concat(_toConsumableArray(t.attributes.content),_toConsumableArray(e.map(function(e){return{type:"video",data:e}})))})},allowedTypes:["video"],multiple:!0,render:function(e){var t=e.open;return r.element.createElement(s,{icon:"plus",label:c("Upload","zabit"),onClick:t})}}),r.element.createElement(s,{icon:"format-video",label:"Add",onClick:function(){t.setAttributes({openedYT:!0})}}),r.element.createElement(s,{icon:"format-video",label:"Add",onClick:function(){t.setAttributes({openedVimeo:!0})}}),r.element.createElement(s,{icon:"format-video",label:"Add",onClick:function(){t.setAttributes({openedIFrame:!0})}}))),t.attributes.content.map(function(e){return r.element.createElement("div",{className:"media__item"},function(e){switch(e.type){case"image":case"video":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:e.data.url,"data-fancybox":o,"data-caption":e.data.caption},e.data.id);case"vimeo":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:"https://vimeo.com/".concat(e.data),"data-fancybox":o},e.data);case"youtube":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:"https://www.youtube.com/watch?v=".concat(e.data),"data-fancybox":o},e.data);case"iframe":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:e.data,"data-fancybox":o,"data-src":e.data},e.data)}}(e))}),t.attributes.openedYT&&r.element.createElement(u,{title:c("Youtube","zabit"),onRequestClose:e},r.element.createElement(b,{label:c("Youtube ID","zabit"),value:t.attributes.youtube,onChange:function(e){t.setAttributes({youtube:e})}}),r.element.createElement(d,{isDefault:!0,onClick:function(){""!==t.attributes.youtube&&(t.setAttributes({content:[].concat(_toConsumableArray(t.attributes.content),[{type:"youtube",data:t.attributes.youtube}]),youtube:""}),e())}},c("Add","zabit"))),t.attributes.openedVimeo&&r.element.createElement(u,{title:c("Vimeo","zabit"),onRequestClose:a},r.element.createElement(b,{label:c("Vimeo ID","zabit"),value:t.attributes.vimeo,onChange:function(e){t.setAttributes({vimeo:e})}}),r.element.createElement(d,{isDefault:!0,onClick:function(){""!==t.attributes.vimeo&&(t.setAttributes({content:[].concat(_toConsumableArray(t.attributes.content),[{type:"vimeo",data:t.attributes.vimeo}]),vimeo:""}),a())}},c("Add","zabit"))),t.attributes.openedIFrame&&r.element.createElement(u,{title:c("IFrame","zabit"),onRequestClose:n},r.element.createElement(b,{label:c("IFrame URL","zabit"),value:t.attributes.iframe,onChange:function(e){t.setAttributes({iframe:e})}}),r.element.createElement(d,{isDefault:!0,onClick:function(){""!==t.attributes.iframe&&(t.setAttributes({content:[].concat(_toConsumableArray(t.attributes.content),[{type:"iframe",data:t.attributes.iframe}]),iframe:""}),n())}},c("Add","zabit"))))},save:function(e){var t="zabit/media:".concat(Math.round(1024*Math.random()*1024));return r.element.createElement("div",{className:"".concat(e.className," media")},e.attributes.content.map(function(e){return r.element.createElement("div",{className:"media__item"},function(e){switch(e.type){case"image":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:e.data.url,"data-fancybox":t,"data-caption":e.data.caption},r.element.createElement("img",{src:e.data.url,title:e.data.title,alt:e.data.alt}));case"video":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:e.data.url,"data-fancybox":t,"data-caption":e.data.caption},r.element.createElement("video",null,r.element.createElement("source",{src:e.data.url,type:"video/mp4"}),c("Your browser doesn't support HTML5 video tag.","zabit")));case"vimeo":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:"https://vimeo.com/".concat(e.data),"data-src":"https://vimeo.com/".concat(e.data),"data-fancybox":t},r.element.createElement("iframe",{src:"http://player.vimeo.com/video/".concat(e.data),frameBorder:"0"}));case"youtube":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:"https://www.youtube.com/watch?v=".concat(e.data),"data-src":"https://www.youtube.com/watch?v=".concat(e.data),"data-fancybox":t},r.element.createElement("iframe",{src:"http://www.youtube.com/embed/".concat(e.data,"?autoplay=0&controls=0&origin=").concat(a.origin),frameBorder:"0"}));case"iframe":return r.element.createElement("a",{className:"media__item__content media__item__content_".concat(e.type),href:e.data,"data-fancybox":t,"data-src":e.data},r.element.createElement("iframe",{src:e.data,frameBorder:"0"}))}}(e))}))}})}(window.wp,location);
//# sourceMappingURL=media-editor.js.map
