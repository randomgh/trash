{"version":3,"sources":["admin.js"],"names":["$","document","ready","event","open","preventDefault","currentTarget","metaBox","parents","type","target","data","media","split","value","find","on","attachment","state","get","toJSON","html","concat","url","input","val","id","toggleClass","frame","actionAdd","actionRemove","remove","jQuery","actions","edit","wp","img","item","actionAddUrl","first","attr","actionAddImage","before","children"],"mappings":"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","file":"admin.js","sourcesContent":["(($) => {\r\n    $(document).ready(event => {\r\n        const open = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                  metaBox = $(target).parents('.zabit-field_media'),\r\n                  type = metaBox.data('type'),\r\n                  frame = wp.media({\r\n                      library: {\r\n                          type: type ? type.split(',') : null\r\n                      }\r\n                  }),\r\n                  value = metaBox.find('.zabit-field__value'),\r\n                  input = metaBox.find('.zabit-field__input');\r\n\r\n            frame.on('select', function(){\r\n                const attachment = frame.state().get('selection').first().toJSON();\r\n\r\n                switch (type) {\r\n                    case 'video':\r\n                        value.html(`<video class=\"zabit-field__value__img\" src=\"${attachment.url}\"></video>`);\r\n                        break;\r\n                    case 'image':\r\n                        value.html(`<img class=\"zabit-field__value__img\" src=\"${attachment.url}\" alt=\"\" />`);\r\n                        break;\r\n                }\r\n\r\n                input.val(attachment.id);\r\n\r\n                metaBox.toggleClass('zabit-field_value', true);\r\n                metaBox.toggleClass('zabit-field_empty', false);\r\n            });\r\n\r\n            frame.open();\r\n        };\r\n\r\n        const remove = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                  metaBox = $(target).parents('.zabit-field_media'),\r\n                  value = metaBox.find('.zabit-field__value'),\r\n                  input = metaBox.find('.zabit-field__input');\r\n\r\n            value.html('');\r\n            input.val('');\r\n\r\n            metaBox.toggleClass('zabit-field_value', false);\r\n            metaBox.toggleClass('zabit-field_empty', true);\r\n        };\r\n\r\n        const metaBox = $('.zabit-field_media'),\r\n              actionAdd = metaBox.find('.zabit-field__action_add'),\r\n              actionEdit = metaBox.find('.zabit-field__action_edit'),\r\n              actionRemove = metaBox.find('.zabit-field__action_remove'),\r\n              value = metaBox.find('.zabit-field__value'),\r\n              input = metaBox.find('.zabit-field__input');\r\n\r\n        actionAdd.on('click', open);\r\n        actionEdit.on('click', open);\r\n        actionRemove.on('click', remove);\r\n        value.on('click', open);\r\n        input.on('focusin', open);\r\n    });\r\n})(jQuery);\r\n\r\n(($) => {\r\n    $(document).ready(event => {\r\n        const addUrl = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                  metaBox = $(target).parents('.zabit-field_gallery'),\r\n                  actions = metaBox.children('.zabit-field__actions');\r\n\r\n            actions.before('<div class=\"zabit-field__item\"><input class=\"zabit-field__input zabit-field__input_url ' + metaBox.data('class') + '\" name=\"' + metaBox.data('name') + '\" type=\"url\"><span class=\"zabit-field__actions\"><a class=\"zabit-field__action zabit-field__action_remove\" href=\"#\" title=\"Remove icon\"></a></span></div>');\r\n        };\r\n\r\n        const open = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                frame = wp.media({}),\r\n                metaBox = $(target).parents('.zabit-field_gallery'),\r\n                actions = metaBox.children('.zabit-field__actions');\r\n\r\n            frame.on('select', function(){\r\n                const attachment = frame.state().get('selection').first().toJSON();\r\n\r\n                actions.before('<div class=\"zabit-field__item\"><input class=\"components-hidden-control__input zabit-field__input zabit-field__input_hidden ' + metaBox.data('class') + '\" name=\"' + metaBox.data('name') + '\" type=\"hidden\" value=\"' + attachment.id + '\"><span class=\"zabit-field__value\"><img class=\"zabit-field__value__img\" src=\"' + attachment.url + '\" alt=\"' + attachment.id + '\" /></span><span class=\"zabit-field__actions\"><a class=\"zabit-field__action zabit-field__action_edit\" href=\"#\" title=\"Edit icon\"></a><a class=\"zabit-field__action zabit-field__action_remove\" href=\"#\" title=\"Remove icon\"></a></span></div>');\r\n            });\r\n\r\n            frame.open();\r\n        };\r\n\r\n        const edit = event => {\r\n            event.preventDefault();\r\n\r\n            const target = event.currentTarget,\r\n                frame = wp.media({}),\r\n                item = $(target).parents('.zabit-field__item'),\r\n                input = item.find('.zabit-field__input'),\r\n                img = item.find('.zabit-field__value__img');\r\n\r\n            frame.on('select', function(){\r\n                const attachment = frame.state().get('selection').first().toJSON();\r\n\r\n                img.attr('src', attachment.url);\r\n                input.val(attachment.id);\r\n            });\r\n\r\n            frame.open();\r\n        };\r\n\r\n        const remove = event => {\r\n            event.preventDefault();\r\n\r\n            $(event.currentTarget).parents('.zabit-field__item').remove()\r\n        };\r\n\r\n        const metaBox = $('.zabit-field_gallery'),\r\n            actionAddUrl = metaBox.find('.zabit-field__action_add-url'),\r\n            actionAddImage = metaBox.find('.zabit-field__action_add-image');\r\n\r\n        metaBox.on('click', '.zabit-field__action_edit', edit);\r\n        metaBox.on('click', '.zabit-field__value', edit);\r\n        metaBox.on('click', '.zabit-field__action_remove', remove);\r\n\r\n        actionAddUrl.on('click', addUrl);\r\n        actionAddImage.on('click', open);\r\n    });\r\n})(jQuery);"]}